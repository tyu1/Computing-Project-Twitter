<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Sentiment Analysis</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- Le styles -->
            <!-- bootstrap css -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
            <!-- base css -->
        <link class="links-css" href="css/base.css" rel="stylesheet">
            <!-- elements page css -->
        <link href="css/elements.css" rel="stylesheet">
        <style type="text/css">
            body {
                padding-top: 60px;
                padding-bottom: 40px;
            }
            .sidebar-nav {
                padding: 9px 0;
            }
            .result_wrapper, .result_wrapper_overview, .result_wrapper_overview_sum{
                display: none;
            }
        </style>
            <!-- colorpicker css -->
        <link href="css/colorpicker.css" rel="stylesheet">
            <!-- bootstrap responsive css -->
        <link href="css/bootstrap-responsive.css" rel="stylesheet">
            <!-- media queries css -->
        <link href="css/media-fluid.css" rel="stylesheet">
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

    </head>

    <body>

        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="dashboard.html"><img src="img/logo-small.png" alt="logo" /></a>
                  

                </div>
            </div>
        </div>

        <div class="container-fluid">
            <div class="row-fluid">
                <div id="menu-left" class="span3">

                     <div  class="sidebar-nav">
                        <ul class="nav nav-list">
                            <li><a href="dashboard.html"><i class="icon-th-large"></i><span> Dashboard</span></a></li>
                            <li><a href="index.html"><i class="icon-th"></i><span>Party Members</span></a></li>
                            <li><a href="partyTweetTime.html"><i class="icon-list-alt"></i><span> Party Tweet Time Distro</span></a></li>
                            <li><a href="tweetSource.html"><i class="icon-tasks"></i><span> Party Tweet Source Distro</span></a></li>
                            <li><a href="keyword_index.html" class="current"><i class="icon-picture"></i><span> Party tweets Sentiment</span></a></li>
                            <li><a href="follower.html"><i class="icon-align-center"></i><span> Follower Distro</span></a></li>
                            <li><a href="retweet.html"><i class="icon-indent-left"></i><span> Retweet Distro</span></a></li>
                            <li><a href="publicTweetsSourceTimeDistro.html"><i class="icon-gift"></i><span> Public Tweets Time/Source Distro</span></a></li>
                            <li><a href="publicTweetsSentiment.html"><i class="icon-comment"></i><span> Public tweets Sentiment</span></a></li>
                            <li><a href="publicTweetsSentimentTimeChange.html"><i class="icon-calendar"></i><span> Sentiment Time Change </span></a></li>
                            <li><a href="map.html"><i class="icon-calendar"></i><span> Sentiment View On Map </span></a></li>
                             <li><a href="heatMap.html"><i class="icon-calendar"></i><span> Sentiment Heatmap </span></a></li>
                        </ul>
                        <div class='togglemenuleft'><a class='toggle-menu'><i class="icon-circle-arrow-left icon-white"></i></a></div>
                    </div>
                </div>
                <div id="content" class="span9 section-body">

                    <div id="section-body" class="tabbable"> <!-- Only required for left/right tabs -->
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#tab3" data-toggle="tab">Sentiment Overview (All tweets from Politician)</a></li>
                            <li><a href="#tab1" data-toggle="tab">Sentiment Overview in Political Parties</a></li>
                            <li><a href="#tab2" data-toggle="tab">Keyword Sentiment Analysis in Political Parties</a></li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane" id="tab1">

                                 <div class="row-fluid loading_overview">
                                    <div class="span10 offset1">
                                        <img style="height:100px;" src="img/loading.gif" alt="loading">
                                    </div>
                                </div>

                                <div class="row-fluid result_wrapper_overview">
                                    <div class="span12">
                                        <div id="accordionOverview1" class="accordion">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a class="accordion-toggle" data-toggle="collapse" href="#notificationOverview1" data-original-title="">
                                                        <i class="fa fa-smile-o"></i> <span class="divider-vertical"></span> Positive Sentiment - Political Parties <i class="icon-chevron-down icon-white pull-right"></i>
                                                    </a>
                                                </div>
                                                <div id="notificationOverview1" class="accordion-body collapse in" style = "overflow-x: auto">
                                                    <div class="accordion-inner paddind">
                                                        <div id="chart_postive_overview" style="width:880px"></div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row-fluid result_wrapper_overview">
                                    <div class="span12">
                                        <div id="accordionOverview2" class="accordion">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a class="accordion-toggle" data-toggle="collapse" href="#notificationOverview2" data-original-title="">
                                                        <i class="fa fa-frown-o"></i> <span class="divider-vertical"></span> Negative Sentiment - Political Parties <i class="icon-chevron-down icon-white pull-right"></i>
                                                    </a>
                                                </div>
                                                <div id="notificationOverview2" class="accordion-body collapse in" style = "overflow-x: auto">
                                                    <div class="accordion-inner paddind">
                                                        <div id="chart_negative_overview" style="width:880px"></div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- TAB: keyword grouped by parties -->
                            <div class="tab-pane" id="tab2">

                                <div class="row-fluid">
                                    <!--Keyword Tool-->
                                    <div class="span10">
                                        <input id="txtKeyword" class="span12" type="text" placeholder="Please enter keyword...">
                                    </div>
                                    
                                    <div class="span2">
                                        <button class="btn btn-primary" id="btn-search"> Search</button>

                                    </div>
                                    
                                    
                                </div>

                                <div class="row-fluid loading" style="display:none">
                                    <div class="span10 offset1">
                                        <img style="height:100px;" src="img/loading.gif" alt="loading">
                                    </div>
                                </div>

                                <div class="row-fluid result_wrapper">
                                    <div class="span12">
                                        <div id="accordion3" class="accordion">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a class="accordion-toggle" data-toggle="collapse" href="#notification" data-original-title="">
                                                        <i class="fa fa-smile-o"></i> <span class="divider-vertical"></span> Positive Sentiment - <span class="badge badge-info lblKeyword"></span> <i class="icon-chevron-down icon-white pull-right"></i>
                                                    </a>
                                                </div>
                                                <div id="notification" class="accordion-body collapse in" style = "overflow-x: auto">
                                                    <div class="accordion-inner paddind">
                                                        <div id="chart_postive" style="width:880px"></div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row-fluid result_wrapper">
                                    <div class="span12">
                                        <div id="accordion33" class="accordion">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a class="accordion-toggle" data-toggle="collapse" href="#notification2" data-original-title="">
                                                        <i class="fa fa-frown-o"></i> <span class="divider-vertical"></span> Negative Sentiment - <span class="badge badge-info lblKeyword"></span> <i class="icon-chevron-down icon-white pull-right"></i>
                                                    </a>
                                                </div>
                                                <div id="notification2" class="accordion-body collapse in" style = "overflow-x: auto">
                                                    <div class="accordion-inner paddind">
                                                        <div id="chart_negative" style="width:880px"></div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>

                            <div class="tab-pane active" id="tab3">

                                 <div class="row-fluid loading_overview_sum">
                                    <div class="span10 offset1">
                                        <img style="height:100px;" src="img/loading.gif" alt="loading">
                                    </div>
                                </div>

                                <div class="row-fluid result_wrapper_overview_sum">
                                    <div class="span12">
                                        <div id="accordionOverviewSum" class="accordion">
                                            <div class="accordion-group">
                                                <div class="accordion-heading">
                                                    <a class="accordion-toggle" data-toggle="collapse" href="#notificationOverviewSum" data-original-title="">
                                                        <i class="fa fa-smile-o"></i> <i class="fa fa-frown-o"></i> <span class="divider-vertical"></span> Sentiment Overview <i class="icon-chevron-down icon-white pull-right"></i>
                                                    </a>
                                                </div>
                                                <div id="notificationOverviewSum" class="accordion-body collapse in" style = "overflow-x: auto">
                                                    <div class="accordion-inner paddind">
                                                        <div id="chart_sentiment_overview" style="width:880px"></div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>                             
                                
                            </div>       

                        </div>
                    </div>
                </div>
            </div>
            <footer>
                <p><strong>&copy; POLITICIAN SENTIMENT 2014</strong></p>
            </footer>
           <div class="theme">
                <h4>Style</h4>
                    <a class="darkblue style" href="darkblue.css"></a>
                    <a class="darkred style" href="darkred.css"></a>
                    <a class="default style" href="base.css"></a>
                     <a class="switcher" href="#"><i class="icon-circle-arrow-right"></i></a>
            </div>
        </div><!--/.fluid-container-->

        <!-- Le javascript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/bootstrap-colorpicker.js"></script>
        <script src="http://code.highcharts.com/highcharts.js"></script>
        <script src="http://code.highcharts.com/modules/exporting.js"></script>

        <script type="text/javascript">
            $(document).ready(function(){
                Highcharts.setOptions({ colors: ['#1C4989','#F7BF30','#D22337','#59A845','#97CADF','#FDE785','#F5A8B2','#A2CEA3','#EACE89','#1C4989','#F7BF30','#D22337','#59A845','#97CADF','#FDE785','#F5A8B2','#A2CEA3','#EACE89','#1C4989','#F7BF30','#D22337','#59A845','#97CADF','#FDE785','#F5A8B2','#A2CEA3','#EACE89','#1C4989','#F7BF30','#D22337','#59A845','#97CADF','#FDE785','#F5A8B2','#A2CEA3','#EACE89'] }); 

                $('.togglemenuleft').click(function(){
                    $('#menu-left').toggleClass('span1');
                    $('#menu-left').toggleClass('icons-only');
                    $('#menu-left').toggleClass('span3');
                    $('#content').toggleClass('span9');
                    $('#content').toggleClass('span11');
                    $(this).find('i').toggleClass('icon-circle-arrow-right');
                    $(this).find('i').toggleClass('icon-circle-arrow-left');
                    $('#menu-left').find('span').toggle();
                    $('#menu-left').find('.dropdown').toggle();
                });

                $('#menu-left a').click(function(){
                    $('#menu-left').find('a').removeClass('active');
                    $(this).addClass('active');
                });
                // switch style 

                $(".switcher").click(function(){
                    if($(this).find('i').hasClass('icon-circle-arrow-right'))
                    $('.theme').animate({left:'0px'},500);
                    else
                    $('.theme').animate({left:'-89'},500);

                    $(this).find('i').toggleClass('icon-circle-arrow-right');
                    $(this).find('i').toggleClass('icon-circle-arrow-left');
                });
                // colorpicker
                $('#cp1').colorpicker({
                    format: 'hex'
                });
                $('#cp2').colorpicker();

                $('#cp3').colorpicker();

                var bodyStyle = $('body')[0].style;
                $('#cp4').colorpicker().on('changeColor', function(ev){
                    bodyStyle.backgroundColor = ev.color.toHex();
                });
                $('a.style').click(function(){
                    var style = $(this).attr('href');
                    $('.links-css').attr('href','css/' + style);
                    return false;
                });


                //New codes
                $('#btn-search').click(function(){
                    $(".loading").css("display","block");
                    
                    $(".result_wrapper").css("display","none");
                    $(".lblKeyword").html($("#txtKeyword").val());
                    
                    PopulateKeywordChart();
                    
                });
                PopulateOverviewChart();

                PopulateOverviewSumChart();
            });

            function PopulateKeywordChart()
            {
                $.ajax({
                    url : "/tweetSentimentByKeyword?keyword=" + $("#txtKeyword").val(),
                    type: "GET",
                    success: function(result)
                    {
                        PopulatePositiveChart(result,"chart_postive");
                        PopulateNegativeChart(result,"chart_negative");
                        $(".loading").css("display","none");
                        $(".result_wrapper").css("display","block");
                    },
                    error: function (jqXHR, textStatus, errorThrown)
                    {
                        alert("Something went wrong!");
                    }
                });
            }

            function PopulateOverviewChart()
            {

                $.ajax({
                    url : "/tweetSentimentByKeyword?keyword=",
                    type: "GET",
                    success: function(result)
                    {
                        PopulatePositiveChart(result,"chart_postive_overview");
                        PopulateNegativeChart(result,"chart_negative_overview");
                        $(".loading_overview").css("display","none");
                        $(".result_wrapper_overview").css("display","block");
                        
                    },
                    error: function (jqXHR, textStatus, errorThrown)
                    {
                        alert("Something went wrong!");
                    }
                });
            }

            function PopulatePositiveChart(data,chartId)
            {
                $('#'+chartId).highcharts({
                    chart: {
                        type: 'bar'
                    },
                    title: {
                        text: ''
                    },
                    xAxis: {
                        categories: data.categories
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: 'Counts'
                        }
                    },
                    legend: {
                        reversed: true
                    },
                    series: data.positive_series
                });
            }

            function PopulateNegativeChart(data,chartId)
            {
                $('#'+chartId).highcharts({
                    chart: {
                        type: 'bar'
                    },
                    title: {
                        text: ''
                    },
                    xAxis: {
                        categories: data.categories
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: 'Counts'
                        }
                    },
                    legend: {
                        reversed: true
                    },
                    series: data.positive_series
                });
            }

            function PopulateOverviewSumChart()
            {
                $.ajax({
                    url : "/tweetSentimentOverview",
                    type: "GET",
                    success: function(result)
                    {
                        PopulateBarChart(result);
                        $(".loading_overview_sum").css("display","none");
                        $(".result_wrapper_overview_sum").css("display","block");
                    },
                    error: function (jqXHR, textStatus, errorThrown)
                    {
                        alert("Something went wrong!");
                    }
                });
            }
            function PopulateBarChart(data)
            {
                $('#chart_sentiment_overview').highcharts({
                    chart: {
                        type: 'bar'
                    },
                    title: {
                        text: ''
                    },
                    xAxis: {
                        categories: data.categories
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: 'Counts'
                        }
                    },
                    legend: {
                        reversed: true
                    },
                    series: data.final_series_data
                });
            }
        </script>

        
    </body>
</html>
